SQL> select deptno,avg(sal) from emp where deptno is not null group by deptno having avg(sal)>=all(select avg(sal) from emp where deptno is not null group by deptno);

DEP   AVG(SAL)                                                                  
--- ----------                                                                  
D1       46400                                                                  

SQL> spool off;
